{"tiddlers":{"$:/config/Search/AutoFocus":{"title":"$:/config/Search/AutoFocus","text":"false\r\n"},"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Key","text":"/"},"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FocusSearch/Caption","text":"Focus search"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Key","text":"s"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToSearch/Caption","text":"GoToSearch"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Key","text":"g i"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToControlPanel/Caption","text":"GoToControlPanel"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Key","text":"g h"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToGettingStarted/Caption","text":"GoToGettingStarted"},"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Key","text":"g r"},"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/RefreshWiki/Caption","text":"Refresh wiki"},"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key","text":"?"},"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Caption","text":"Show this help message"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Key","text":"g p"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToPlugins/Caption","text":"Go to Plugins"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Key","text":"g I"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToInbox/Caption","text":"Go to inbox"},"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Key","text":"g t"},"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/TogglePalette/Caption","text":"togglePalette"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Key","text":"g s"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleSidebar/Caption","text":"ToggleSidebar"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Key","text":"g o"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleOpen/Caption","text":"ToggleOpen"},"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Key","text":"f"},"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/Fullscreen/Caption","text":"Fullscreen"},"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Key","text":"g n"},"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CreateNewTiddler/Caption","text":"Create a new tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Key","text":"d d"},"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/DeleteTiddler/Caption","text":"Delete selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Key","text":"g g"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToFirstTiddler/Caption","text":"Go to first tiddler in story river"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Key","text":"G"},"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/GoToLastTiddler/Caption","text":"Go to last tiddler in story river"},"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Key","text":"j"},"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SelectNextTiddler/Caption","text":"Select next tiddler in story river"},"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Key","text":"k"},"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SelectPreviousTiddler/Caption","text":"Select previous tiddler in story river"},"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Key","text":"g e"},"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/EditTiddler/Caption","text":"Edit selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Key","text":"g c"},"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CloseTiddler/Caption","text":"Close selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Key","text":"g d"},"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/CloseAllTiddlers/Caption","text":"Close all tiddlers"},"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Key","text":"z c"},"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FoldTiddler/Caption","text":"Fold selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Key","text":"z o"},"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldTiddler/Caption","text":"Unfold selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Key","text":"z a"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleTiddler/Caption","text":"Toggle folding for selected tiddler"},"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Key","text":"z C"},"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/FoldAllTiddlers/Caption","text":"Fold all tiddlers"},"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Key","text":"z O"},"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/UnfoldAllTiddlers/Caption","text":"Unfold all tiddlers"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Key","text":"z A"},"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/ToggleAllTiddlers/Caption","text":"Toggle folding for all tiddlers"},"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Key","text":"q"},"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/Dismiss/Caption","text":"Dismiss selection"},"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Key":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Key","text":"g w"},"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Caption":{"title":"$:/plugins/oeyoews/motion/config/Shortcuts/SaveWiki/Caption","text":"Save wiki"},"$:/plugins/oeyoews/motion/config/FocusSelected":{"title":"$:/plugins/oeyoews/motion/config/FocusSelected","text":"true"},"$:/plugins/oeyoews/motion/modules/library/Motion.min.js":{"text":"module.exports = class Motion {\r\n  constructor() {\r\n    this.prefix = '$:/plugins/oeyoews/motion';\r\n    this.selectedStateTiddlerTitle = '$:/state/plugins/oeyoews/motion/selected';\r\n  }\r\n  init() {\r\n    this.navigatorWidget = this.getNavigatorWidget($tw.rootWidget);\r\n    $tw.hooks.addHook(\r\n      'th-closing-tiddler',\r\n      this.handleClosingTiddler.bind(this),\r\n    );\r\n    const shortcuts = {\r\n      ShowHelp: () => {\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-modal',\r\n          param: this.getPluginTitle('Help'),\r\n        });\r\n        return false;\r\n      },\r\n      /* ShowFancybox: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'om-fancybox' });\r\n        return false;\r\n      }, */\r\n      /* ShowCopyButton: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'om-copy-code' });\r\n        return false;\r\n      }, */\r\n      Fullscreen: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'tm-full-screen' });\r\n        return false;\r\n      },\r\n      FocusSearch: () => {\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-focus-selector',\r\n          param: '.nc-topbar-wrapper input',\r\n        });\r\n        return false;\r\n      },\r\n      CreateNewTiddler: () => {\r\n        const newTiddler = {\r\n          title: '',\r\n          text: '',\r\n          type: 'text/markdown', // Set the content type to text/markdown\r\n        };\r\n        this.navigatorWidget.dispatchEvent({\r\n          // param: 'template',\r\n          type: 'tm-new-tiddler',\r\n          paramObject: newTiddler, // Pass the new tiddler object as paramObject\r\n        });\r\n        return false;\r\n      },\r\n      DeleteTiddler: () => {\r\n        let selectedTiddler =\r\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-delete-tiddler',\r\n          param: selectedTiddler,\r\n        });\r\n        return false;\r\n      },\r\n      RefreshWiki: () => {\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-browser-refresh',\r\n        });\r\n        return false;\r\n      },\r\n      SaveWiki: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'tm-save-wiki' });\r\n        return false;\r\n      },\r\n      SelectNextTiddler: () => {\r\n        let selectedTiddler =\r\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        if (!storyList.length) {\r\n          return;\r\n        }\r\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\r\n        let nextTiddlerIndex;\r\n        if (currentTiddlerIndex < 0) {\r\n          nextTiddlerIndex = 0;\r\n        } else {\r\n          nextTiddlerIndex = Math.min(\r\n            currentTiddlerIndex + 1,\r\n            storyList.length - 1,\r\n          );\r\n        }\r\n        selectedTiddler = storyList[nextTiddlerIndex];\r\n        $tw.wiki.addTiddler({\r\n          title: this.selectedStateTiddlerTitle,\r\n          text: selectedTiddler,\r\n        });\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: selectedTiddler,\r\n        });\r\n        this.focusTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      SelectPreviousTiddler: () => {\r\n        let selectedTiddler =\r\n          $tw.wiki.getTiddlerText(this.selectedStateTiddlerTitle) || '';\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        if (!storyList.length) {\r\n          return;\r\n        }\r\n        let currentTiddlerIndex = storyList.indexOf(selectedTiddler);\r\n        let nextTiddlerIndex;\r\n        if (currentTiddlerIndex < 0) {\r\n          nextTiddlerIndex = 0;\r\n        } else {\r\n          nextTiddlerIndex = Math.max(currentTiddlerIndex - 1, 0);\r\n        }\r\n        selectedTiddler = storyList[nextTiddlerIndex];\r\n        $tw.wiki.addTiddler({\r\n          title: this.selectedStateTiddlerTitle,\r\n          text: selectedTiddler,\r\n        });\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: selectedTiddler,\r\n        });\r\n        this.focusTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      GoToGettingStarted: () => {\r\n        const gettingstarted = 'GettingStarted';\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: gettingstarted,\r\n        });\r\n        return false;\r\n      },\r\n      GoToPlugins: () => {\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: '$:/core/ui/ControlPanel/Plugins',\r\n        });\r\n        return false;\r\n      },\r\n      GoToSearch: () => {\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: '$:/AdvancedSearch',\r\n        });\r\n        return false;\r\n      },\r\n      GoToControlPanel: () => {\r\n        const controlpanel = '$:/ControlPanel';\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: controlpanel,\r\n        });\r\n        return false;\r\n      },\r\n      GoToInbox: () => {\r\n        const hasProjectify = $tw.wiki.getTiddler('$:/plugins/nico/projectify');\r\n        const dashboard = '$:/plugins/nico/projectify/ui/dashboard/Dashboard';\r\n        if (!hasProjectify) return;\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: dashboard,\r\n        });\r\n        this.focusTiddler(dashboard);\r\n        return false;\r\n      },\r\n      GoToFirstTiddler: () => {\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        if (!storyList.length) {\r\n          return;\r\n        }\r\n        const selectedTiddler = storyList[0];\r\n        $tw.wiki.addTiddler({\r\n          title: this.selectedStateTiddlerTitle,\r\n          text: selectedTiddler,\r\n        });\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: selectedTiddler,\r\n        });\r\n        this.focusTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      GoToLastTiddler: () => {\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        if (!storyList.length) {\r\n          return;\r\n        }\r\n        const selectedTiddler = storyList[storyList.length - 1];\r\n        $tw.wiki.addTiddler({\r\n          title: this.selectedStateTiddlerTitle,\r\n          text: selectedTiddler,\r\n        });\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-navigate',\r\n          navigateTo: selectedTiddler,\r\n        });\r\n        this.focusTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      EditTiddler: () => {\r\n        const selectedTiddler = $tw.wiki.getTiddlerText(\r\n          this.selectedStateTiddlerTitle,\r\n        );\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-edit-tiddler',\r\n          param: selectedTiddler,\r\n        });\r\n        return false;\r\n      },\r\n      CloseTiddler: () => {\r\n        const selectedTiddler = $tw.wiki.getTiddlerText(\r\n          this.selectedStateTiddlerTitle,\r\n        );\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.navigatorWidget.dispatchEvent({\r\n          type: 'tm-close-tiddler',\r\n          param: selectedTiddler,\r\n        });\r\n        return false;\r\n      },\r\n      CloseAllTiddlers: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'tm-close-all-tiddlers' });\r\n        return false;\r\n      },\r\n      TogglePalette: () => {\r\n        this.navigatorWidget.dispatchEvent({ type: 'om-toggle-theme' });\r\n        new $tw.Notify().display({\r\n          title: `🎨 Toggle Theme`,\r\n          icon: 'success',\r\n        })\r\n        return false;\r\n      },\r\n      ToggleTiddler: () => {\r\n        const selectedTiddler = $tw.wiki.getTiddlerText(\r\n          this.selectedStateTiddlerTitle,\r\n        );\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.toggleTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      UnfoldTiddler: () => {\r\n        const selectedTiddler = $tw.wiki.getTiddlerText(\r\n          this.selectedStateTiddlerTitle,\r\n        );\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.unfoldTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      FoldTiddler: () => {\r\n        const selectedTiddler = $tw.wiki.getTiddlerText(\r\n          this.selectedStateTiddlerTitle,\r\n        );\r\n        if (!selectedTiddler) {\r\n          return;\r\n        }\r\n        this.foldTiddler(selectedTiddler);\r\n        return false;\r\n      },\r\n      // toggle sidebar\r\n      ToggleSidebar: () => {\r\n        this.toggleSidebar();\r\n        return false;\r\n      },\r\n      ToggleOpen: () => {\r\n        this.toggleSidebar('Open');\r\n        return false;\r\n      },\r\n      ToggleAllTiddlers: () => {\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        for (const title of storyList) {\r\n          this.toggleTiddler(title);\r\n        }\r\n        return false;\r\n      },\r\n      FoldAllTiddlers: () => {\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        for (const title of storyList) {\r\n          this.foldTiddler(title);\r\n        }\r\n        return false;\r\n      },\r\n      UnfoldAllTiddlers: () => {\r\n        const storyList = this.navigatorWidget.story.getStoryList();\r\n        for (const title of storyList) {\r\n          this.unfoldTiddler(title);\r\n        }\r\n        return false;\r\n      },\r\n      // TODO should use keypress, not keydown\r\n      Dismiss: () => {\r\n        // Close help modal if it's open.\r\n        // HACK: Close the modal by clicking the button to dispatch the internal\r\n        // tm-close-tiddler message.\r\n        const button = document.querySelector('.tc-modal-footer button');\r\n        if (button) {\r\n          button.click();\r\n        }\r\n        // Deselect tiddler.\r\n        $tw.wiki.deleteTiddler(this.selectedStateTiddlerTitle);\r\n      },\r\n    };\r\n    for (const [name, handler] of Object.entries(shortcuts)) {\r\n      const shortcut = this.getSetting(`Shortcuts/${name}/Key`);\r\n      Mousetrap.bind(shortcut, handler);\r\n    }\r\n  } // int end\r\n  /* some aid method */\r\n  getSetting(name) {\r\n    return $tw.wiki.getTiddlerText(this.getPluginTitle(`config/${name}`));\r\n  }\r\n  getPluginTitle(title) {\r\n    return `${this.prefix}/${title}`;\r\n  }\r\n  handleClosingTiddler(event) {\r\n    const selectedTiddler = $tw.wiki.getTiddlerText(\r\n      this.selectedStateTiddlerTitle,\r\n    );\r\n    if (event.param == selectedTiddler) {\r\n      $tw.wiki.deleteTiddler(this.selectedStateTiddlerTitle);\r\n    }\r\n    return event;\r\n  }\r\n  toggleTiddler(title) {\r\n    if ($tw.wiki.getTiddlerText(`$:/state/folded/${title}`) == 'hide') {\r\n      this.unfoldTiddler(title);\r\n    } else {\r\n      this.foldTiddler(title);\r\n    }\r\n  }\r\n  foldTiddler(title) {\r\n    $tw.wiki.setText(`$:/state/folded/${title}`, 'text', null, 'hide');\r\n  }\r\n  unfoldTiddler(title) {\r\n    $tw.wiki.deleteTiddler(`$:/state/folded/${title}`);\r\n  }\r\n  toggleLayout(\r\n    targetLayout = '$:/plugins/oeyoews/neotw/modules/landing/layout',\r\n  ) {\r\n    const layout = $tw.wiki.getTiddlerText('$:/layout');\r\n    const vanillaLayout = '$:/core/ui/PageTemplate';\r\n    if (layout == vanillaLayout) {\r\n      $tw.wiki.setText('$:/layout', 'text', null, targetLayout);\r\n    }\r\n    if (layout == targetLayout) {\r\n      $tw.wiki.setText('$:/layout', 'text', null, vanillaLayout);\r\n    }\r\n  }\r\n  // toggle notebook-sidebar\r\n  toggleSidebar(session = 'Recent') {\r\n    if ($tw.wiki.getTiddlerText(`$:/state/notebook-sidebar`) == 'yes') {\r\n      $tw.wiki.setText(`$:/state/notebook-sidebar`, 'text', null, 'no');\r\n    } else {\r\n      $tw.wiki.setText(`$:/state/notebook-sidebar`, 'text', null, 'yes');\r\n      $tw.wiki.setText(\r\n        `$:/state/notebook-sidebar-section`,\r\n        'text',\r\n        null,\r\n        '$:/core/ui/SideBar/' + session,\r\n      );\r\n    }\r\n  }\r\n  getNavigatorWidget(widget) {\r\n    const child = widget.children[0];\r\n    if (child.parseTreeNode.type == 'navigator') {\r\n      return child;\r\n    }\r\n    return this.getNavigatorWidget(child);\r\n  }\r\n  getTiddlerElement(title) {\r\n    return document.querySelector(\r\n      `[data-tiddler-title=\"${CSS.escape(title)}\"]`,\r\n    );\r\n  }\r\n  focusTiddler(title) {\r\n    const focusedTitle = this.getTiddlerElement(title);\r\n    const focusSelected = this.getSetting('FocusSelected');\r\n    if (focusedTitle && focusSelected === 'true') {\r\n      focusedTitle.tabIndex = -1;\r\n      focusedTitle.focus();\r\n    }\r\n  }\r\n}\r\n","title":"$:/plugins/oeyoews/motion/modules/library/Motion.min.js","type":"application/javascript","module-type":"library"},"$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js":{"text":"/* mousetrap v1.6.5 craig.is/killing/mice */\r\n(function(q,u,c){function v(a,b,g){a.addEventListener?a.addEventListener(b,g,!1):a.attachEvent(\"on\"+b,g)}function z(a){if(\"keypress\"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function F(a){var b=[];a.shiftKey&&b.push(\"shift\");a.altKey&&b.push(\"alt\");a.ctrlKey&&b.push(\"ctrl\");a.metaKey&&b.push(\"meta\");return b}function w(a){return\"shift\"==a||\"ctrl\"==a||\"alt\"==a||\r\n\"meta\"==a}function A(a,b){var g,d=[];var e=a;\"+\"===e?e=[\"+\"]:(e=e.replace(/\\+{2}/g,\"+plus\"),e=e.split(\"+\"));for(g=0;g<e.length;++g){var m=e[g];B[m]&&(m=B[m]);b&&\"keypress\"!=b&&C[m]&&(m=C[m],d.push(\"shift\"));w(m)&&d.push(m)}e=m;g=b;if(!g){if(!p){p={};for(var c in n)95<c&&112>c||n.hasOwnProperty(c)&&(p[n[c]]=c)}g=p[e]?\"keydown\":\"keypress\"}\"keypress\"==g&&d.length&&(g=\"keydown\");return{key:m,modifiers:d,action:g}}function D(a,b){return null===a||a===u?!1:a===b?!0:D(a.parentNode,b)}function d(a){function b(a){a=\r\na||{};var b=!1,l;for(l in p)a[l]?b=!0:p[l]=0;b||(x=!1)}function g(a,b,t,f,g,d){var l,E=[],h=t.type;if(!k._callbacks[a])return[];\"keyup\"==h&&w(a)&&(b=[a]);for(l=0;l<k._callbacks[a].length;++l){var c=k._callbacks[a][l];if((f||!c.seq||p[c.seq]==c.level)&&h==c.action){var e;(e=\"keypress\"==h&&!t.metaKey&&!t.ctrlKey)||(e=c.modifiers,e=b.sort().join(\",\")===e.sort().join(\",\"));e&&(e=f&&c.seq==f&&c.level==d,(!f&&c.combo==g||e)&&k._callbacks[a].splice(l,1),E.push(c))}}return E}function c(a,b,c,f){k.stopCallback(b,\r\nb.target||b.srcElement,c,f)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){\"number\"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&(\"keyup\"==a.type&&y===b?y=!1:k.handleKey(b,F(a),a))}function m(a,g,t,f){function h(c){return function(){x=c;++p[a];clearTimeout(q);q=setTimeout(b,1E3)}}function l(g){c(t,g,a);\"keyup\"!==f&&(y=z(g));setTimeout(b,10)}for(var d=p[a]=0;d<g.length;++d){var e=d+1===g.length?l:h(f||\r\nA(g[d+1]).action);n(g[d],e,f,a,d)}}function n(a,b,c,f,d){k._directMap[a+\":\"+c]=b;a=a.replace(/\\s+/g,\" \");var e=a.split(\" \");1<e.length?m(a,e,b,c):(c=A(a,c),k._callbacks[c.key]=k._callbacks[c.key]||[],g(c.key,c.modifiers,{type:c.action},f,a,d),k._callbacks[c.key][f?\"unshift\":\"push\"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:d,combo:a}))}var k=this;a=a||u;if(!(k instanceof d))return new d(a);k.target=a;k._callbacks={};k._directMap={};var p={},q,y=!1,r=!1,x=!1;k._handleKey=function(a,\r\nd,e){var f=g(a,d,e),h;d={};var k=0,l=!1;for(h=0;h<f.length;++h)f[h].seq&&(k=Math.max(k,f[h].level));for(h=0;h<f.length;++h)f[h].seq?f[h].level==k&&(l=!0,d[f[h].seq]=1,c(f[h].callback,e,f[h].combo,f[h].seq)):l||c(f[h].callback,e,f[h].combo);f=\"keypress\"==e.type&&r;e.type!=x||w(a)||f||b(d);r=l&&\"keydown\"==e.type};k._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)n(a[d],b,c)};v(a,\"keypress\",e);v(a,\"keydown\",e);v(a,\"keyup\",e)}if(q){var n={8:\"backspace\",9:\"tab\",13:\"enter\",16:\"shift\",17:\"ctrl\",\r\n18:\"alt\",20:\"capslock\",27:\"esc\",32:\"space\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"ins\",46:\"del\",91:\"meta\",93:\"meta\",224:\"meta\"},r={106:\"*\",107:\"+\",109:\"-\",110:\".\",111:\"/\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"},C={\"~\":\"`\",\"!\":\"1\",\"@\":\"2\",\"#\":\"3\",$:\"4\",\"%\":\"5\",\"^\":\"6\",\"&\":\"7\",\"*\":\"8\",\"(\":\"9\",\")\":\"0\",_:\"-\",\"+\":\"=\",\":\":\";\",'\"':\"'\",\"<\":\",\",\">\":\".\",\"?\":\"/\",\"|\":\"\\\\\"},B={option:\"alt\",command:\"meta\",\"return\":\"enter\",\r\nescape:\"esc\",plus:\"+\",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?\"meta\":\"ctrl\"},p;for(c=1;20>c;++c)n[111+c]=\"f\"+c;for(c=0;9>=c;++c)n[c+96]=c.toString();d.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};d.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};d.prototype.trigger=function(a,b){if(this._directMap[a+\":\"+b])this._directMap[a+\":\"+b]({},a);return this};d.prototype.reset=function(){this._callbacks={};\r\nthis._directMap={};return this};d.prototype.stopCallback=function(a,b){if(-1<(\" \"+b.className+\" \").indexOf(\" mousetrap \")||D(b,this.target))return!1;if(\"composedPath\"in a&&\"function\"===typeof a.composedPath){var c=a.composedPath()[0];c!==a.target&&(b=c)}return\"INPUT\"==b.tagName||\"SELECT\"==b.tagName||\"TEXTAREA\"==b.tagName||b.isContentEditable};d.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};d.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b]);p=null};\r\n  d.init=function(){var a=d(u),b;for(b in a)\"_\"!==b.charAt(0)&&(d[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};d.init();q.Mousetrap=d;\"undefined\"!==typeof module&&module.exports&&(module.exports=d);\"function\"===typeof define&&define.amd&&define(function(){return d})}})(\"undefined\"!==typeof window?window:null,\"undefined\"!==typeof window?document:null);\r\n","title":"$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js","type":"application/javascript","module-type":"library"},"$:/plugins/oeyoews/motion/modules/startup/motion.min.js":{"text":"(function () {\r\n  'use strict';\r\n  exports.platforms = ['browser'];\r\n  exports.after = ['render'];\r\n  exports.synchronous = true;\r\n  exports.startup = () => {\r\n    require('$:/plugins/oeyoews/motion/modules/library/mousetrap.min.js');\r\n    const Motion = require('$:/plugins/oeyoews/motion/modules/library/Motion.min.js');\r\n    new Motion().init();\r\n  };\r\n})();\r\n","title":"$:/plugins/oeyoews/motion/modules/startup/motion.min.js","type":"application/javascript","module-type":"startup"},"$:/plugins/oeyoews/motion/Help":{"title":"$:/plugins/oeyoews/motion/Help","class":"motion-help o-tm","subtitle":"{{||$:/esc}}","mask-closable":"yes","caption":"Keyboard shortcuts","text":"\\define shortcut(shortcut)\r\n<$set name=kbd filter=\"[enlist:raw{$:/plugins/oeyoews/motion/config/Shortcuts/$shortcut$/Key}addprefix[<kbd>]addsuffix[</kbd>]]\">\r\n<tr>\r\n  <td class=\"border-2 p-1\"><<kbd>></td>\r\n  <td class=\"border-2 p-1\"><$transclude tiddler=\"$:/plugins/oeyoews/motion/config/Shortcuts/$shortcut$/Caption\" /></td>\r\n</tr>\r\n</$set>\r\n\\end\n\n<div class=\"grid grid-cols-1 md:grid-cols-2 gap-2 dark:bg-black rounded\">\r\n<table class=\"border-2\">\r\n<$list filter=\"[enlist[Fullscreen ToggleSidebar GoToInbox RefreshWiki GoToGettingStarted GoToControlPanel GoToSearch ToggleLayout TogglePalette GoToPlugins]]\">\r\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\r\n</$list>\r\n</table>\n\n<table class=\"border-2\">\r\n<$list filter=\"[enlist[FocusSearch ShowHelp Dismiss]]\">\r\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\r\n</$list>\r\n</table>\n\n<table class=\"border-2\">\r\n<$list filter=\"[enlist[CreateNewTiddler SelectNextTiddler SelectPreviousTiddler GoToFirstTiddler GoToLastTiddler EditTiddler DeleteTiddler CloseTiddler CloseAllTiddlers]]\">\r\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\r\n</$list>\r\n</table>\n\n<table class=\"border-2\">\r\n<$list filter=\"[enlist[FoldTiddler UnfoldTiddler ToggleTiddler FoldAllTiddlers UnfoldAllTiddlers ToggleAllTiddlers]]\">\r\n<$macrocall $name=\"shortcut\" shortcut=<<currentTiddler>> />\r\n</$list>\r\n</table>\n\n</div>\r\n"},"$:/plugins/oeyoews/motion/icon":{"title":"$:/plugins/oeyoews/motion/icon","text":"<svg stroke=\"currentColor\" fill=\"#389BD2\" stroke-width=\"0\" viewBox=\"0 0 16 16\" height=\"1em\" width=\"1em\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M15.992 4.204c-.071 1.556-1.158 3.687-3.262 6.393-2.175 2.829-4.016 4.243-5.522 4.243-.933 0-1.722-.861-2.367-2.583L3.55 7.523C3.07 5.8 2.556 4.94 2.007 4.94c-.118 0-.537.253-1.254.754L0 4.724a209.56 209.56 0 0 0 2.334-2.081c1.054-.91 1.845-1.388 2.373-1.437 1.243-.123 2.01.728 2.298 2.553.31 1.968.526 3.19.646 3.666.36 1.631.756 2.446 1.186 2.445.334 0 .836-.53 1.508-1.587.671-1.058 1.03-1.863 1.077-2.415.096-.913-.263-1.37-1.077-1.37a3.022 3.022 0 0 0-1.185.261c.789-2.573 2.291-3.825 4.508-3.756 1.644.05 2.419 1.117 2.324 3.2z\"></path></svg>\r\n","type":"image/svg+xml"},"$:/plugins/oeyoews/motion/README":{"title":"$:/plugins/oeyoews/motion/README","text":"<div class=\"prose max-w-none\">\n\nVim-like keyboard shortcuts for TiddlyWiki. modified `based benwebber/motion`\n\n<hr>\n\n!! Usage\n\nPress <kbd>{{$:/plugins/oeyoews/motion/config/Shortcuts/ShowHelp/Key}}</kbd> to show keyboard shortcuts.\n\n!! NOTE\n\n* if your computer installed some vim extensions, such as surfing-keys or vimium, this plugin maybe not work\n\n!! TODO\n\n* suport create default markdown tiddler\r\n* ss sr so\r\n* 支持像素滚动\n\n```\r\n // map multiple combinations to the same callback\r\n    Mousetrap.bind(['command+k', 'ctrl+k'], function() {\r\n        console.log('command k or control k');\n\n        // return false to prevent default browser behavior\r\n        // and stop event from bubbling\r\n        return false;\r\n    });\r\n```\n\n</div>\r\n"},"$:/plugins/oeyoews/motion/styles/dynamic":{"title":"$:/plugins/oeyoews/motion/styles/dynamic","<!-- tags":"$:/tags/Stylesheet -->","text":"<!-- not work -->\n\n<$list filter=\"[{$:/state/plugins/oeyoews/motion/selected}] [has[draft.of]field:draft.of{$:/state/plugins/oeyoews/motion/selected}] +[escapecss[]]\">\r\n[data-tiddler-title=<<currentTiddler>>] {\r\n  outline: <<colour primary>> 2px solid;\r\n  border: red 2px solid;\r\n}\r\n</$list>\r\n"}}}